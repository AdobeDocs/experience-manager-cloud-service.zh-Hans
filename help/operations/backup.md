---
title: AEM as a Cloud Service 中的内容恢复
description: 了解如何使用 Cloud Manager 从备份中恢复 AEM as a Cloud Service 内容。
exl-id: 469fb1a1-7426-4379-9fe3-f5b0ebf64d74
source-git-commit: e816bd55b8b5febb19566f3d6009e6f5e823b22e
workflow-type: tm+mt
source-wordcount: '1229'
ht-degree: 95%

---


# AEM as a Cloud Service 中的内容恢复 {#content-restore}

>[!CONTEXTUALHELP]
>id="aemcloud_golive_backuprestore"
>title="备份和恢复"
>abstract="了解如何使用 Cloud Manager 从备份中恢复 AEM as a Cloud Service 内容。"

了解如何使用 Cloud Manager 从备份中恢复 AEM as a Cloud Service 内容。

>[!NOTE]
>
>* 此功能正在分阶段推出，可能尚未在Cloud Manager的所有租户中启用。
>* 此功能当前仅限于暂存和开发环境。 这些环境类型的功能使用和反馈将确保在不久的将来成功地推广到生产环境。


## 概述 {#overview}

Cloud Manager 的自助恢复过程将数据从 Adobe 系统备份中复制并还原到其原始环境。 执行恢复，将丢失、损坏或意外删除的数据返回到其原始状态。

恢复过程只影响内容，而不会更改您的代码和 AEM 版本。 您可以随时启动单个环境的恢复操作。

Cloud Manager 提供两种类型的备份，您可以从中恢复内容。

* **时间点 (PIT)：**&#x200B;此类型从当前时间的最后 24 小时的连续系统备份中恢复。
* **上周：** 此类型在过去七天内从系统备份进行恢复，但前 24 小时除外。

在这两种情况下，自定义代码版本和 AEM 版本均保持不变。

恢复 AEM as a Content Service 中内容的效果指标参考标准化基准：

* **恢复时间目标 (RTO)：**&#x200B;根据存储库的大小，恢复时间目标各不相同，但根据经验，一旦恢复序列开始，应需要大约 30 分钟。
* **恢复点目标 (RPO)：**&#x200B;最大恢复点目标为 24 小时

>[!TIP]
>
>还可以[使用公共 API 恢复备份。](https://developer.adobe.com/experience-cloud/cloud-manager/reference/api/)

## 限制 {#limitations}

自助恢复机制的使用受以下限制。

* 恢复操作限制为七天，这意味着无法恢复七天以前的快照。
* 每个日历月，一个计划中的所有环境最多允许 10 次成功恢复。
* 创建环境后，需要 6 个小时才能创建第一个备份快照。 在创建此快照之前，不能对环境执行恢复。
* 如果当前为环境运行了完整堆栈或网层配置管道，则不会启动还原操作。
* 如果同一环境中已运行另一个还原，则无法启动还原。
* 在极少数情况下，由于备份时间限制为 24 小时/7 天，因此所选备份可能由于从选择备份到启动恢复之间的延迟而变得不可用。
* 来自已删除环境的数据将永久丢失且无法恢复。

## 恢复内容 {#restoring-content}

首先确定要恢复的内容的时间范围。 然后，要从备份中恢复环境的内容，请执行这些步骤。

>[!NOTE]
>
>必须登录具有&#x200B;**业务所有者**&#x200B;或&#x200B;**部署管理者**&#x200B;角色的用户才能启动还原操作。

1. 在 [my.cloudmanager.adobe.com](https://my.cloudmanager.adobe.com/) 登录 Cloud Manager 并选择适当的组织。

1. 单击要启动还原的程序。

1. 在&#x200B;**程序概述**&#x200B;页面的&#x200B;**环境**&#x200B;卡中，单击要启动恢复的环境旁边的省略号按钮，然后选择&#x200B;**还原内容**。

   ![还原选项](assets/backup-option.png)

   * 或者，您也可以直接导航到&#x200B;**还原内容**&#x200B;选项卡。

1. 在环境详细信息页面的&#x200B;**还原内容**&#x200B;选项卡上，首先在&#x200B;**还原时间**&#x200B;下拉菜单下选择还原的时间范围。

   1. 如果您选择&#x200B;**过去 24 小时**，则相邻的&#x200B;**时间**&#x200B;字段允许您指定过去 24 小时内的准确时间来恢复。

      ![最近 24 小时](assets/backup-time.png)

   1. 如果您选择 **上周**，相邻的&#x200B;**天**&#x200B;字段可让您选择过去七天内的日期（不包括之前的 24 小时）。

      ![上周](assets/backup-date.png)

1. 选择日期或指定时间后，**备份可用**&#x200B;以下部分显示了可恢复的可用备份列表

   ![备份可用](assets/backup-available.png)

1. 使用信息图标查找您要还原的备份，以查看有关该备份中包含的代码版本和 AEM 版本的信息，并在[选择备份时考虑还原的影响。](#choosing-the-right-backup)

   ![备份信息](assets/backup-info.png)

   * 请注意，为还原选项显示的时间戳都基于用户计算机的时区。

1. 单击&#x200B;**还原**&#x200B;图标，该图标表示要恢复以启动恢复过程的备份。

1. 查看&#x200B;**恢复内容**&#x200B;对话框，然后单击&#x200B;**还原**&#x200B;以确认您的请求。

   ![确认还原](assets/backup-restore.png)

备份过程已启动，您可以在&#x200B;**[还原活动](#restore-activity)**&#x200B;表中查看其状态。 恢复操作完成所需的时间取决于要恢复的内容的大小和配置文件。

成功恢复后，环境将：

* 运行与启动还原操作时相同的代码和 AEM 版本。
* 具有与所选快照的时间戳上可用的内容相同，并重新构建索引以匹配当前代码。

## 选择合适的备份 {#choosing-backup}

仅恢复将内容恢复到 AEM。 因此，您必须仔细考虑在所需还原点与当前时间之间所做的代码更改，方法是查看当前提交 ID 与要还原到的提交 ID 之间的提交历史记录。

有几种情况。

* 环境和还原中的自定义代码位于同一存储库和同一分支上。
* 环境和还原中的自定义代码位于同一存储库上，但位于具有相同提交的其他分支上。
* 环境和还原中的自定义代码位于不同的存储库中。
   * 在这种情况下，将不显示提交 ID。
   * 强烈建议您克隆两个存储库，然后使用差异工具来比较分支。

此外，请记住，恢复可能会导致您的生产和暂存环境脱离同步。 恢复内容的后果由您负责。

## 还原活动 {#restore-activity}

**还原活动**&#x200B;表显示最近十个恢复请求的状态，包括任何活动的恢复操作。

![恢复活动](assets/backup-activity.png)

通过单击备份的信息图标，您可以下载该备份的日志，并检查代码详细信息，包括在启动还原时快照和数据之间的差异。

## 异地备份 {#offsite-backup}

常规备份涵盖 AEM Cloud Service 中意外删除或技术故障的风险，但区域故障可能会带来其他风险。 除了可用性外，此类区域中断的最大风险是数据丢失。

AEM as a Cloud Service 通过连续将所有 AEM 内容复制到远程区域并使其可在三个月的时间内进行恢复，来缓解所有 AEM 生产环境的这一风险。 此功能称为异地备份。

在数据区域发生中断时，AEM 服务可靠性工程部门会执行从异地备份恢复用于暂存和生产环境的 AEM Cloud Service 的操作。
