---
title: Adobe Experience manager云服务架构简介
description: 'Adobe Experience manager云服务架构简介。 '
translation-type: tm+mt
source-git-commit: 5a846d34ee094e7d2f7fc71dbeef65f3fa58e86c

---


# Adobe Experience manager云服务架构简介 {#an-introduction-to-the-architecture-adobe-experience-manager-as-a-cloud-service}

Adobe Experience Manager(AEM)作为云服务，已对架构进行了更改。

## 缩放 {#scaling}

AEM作为云服务现在具有：

* 具有可变数量AEM图像的动态架构。

![动态架](assets/concepts-01.png "构动态架构")

此架构：

* 根据实际流量和实 *际活* 动进 *行缩放* 。

* 具有仅在需要时运行的单个实例。

* 使用模块化应用程序。

* 默认设置作者群集；这可避免维护任务的停机。

这为不同的使用模式启用了自动缩放功能：

![可变使用模式的自动缩放](assets/concepts-02.png "可变使用模式的自动缩放")

为此，将AEM作为云服务创建的所有实例均相等，每个实例在节点数、分配的内存和分配的计算容量方面都具有相同的默认大小调整特征。

AEM作为云服务的基础是使用一个安排引擎，该引擎可以：

* 持续监视服务状态。

* 根据实际需要动态缩放每个服务实例；根据需要进行放大或缩小。

这：

* 适用于每个节点的节点数、内存量和分配的CPU容量。

* 允许AEM作为云服务在您的流量模式发生变化时进行调整。

服务的每个租户实例的缩放可以是自动的或手动的，在两个轴上：

* 垂直：对于固定数量的节点，可以放大或缩小已分配的内存和CPU容量。

* 水平：可以增加或减少给定服务的节点数。

## 环境 {#environments}

>[!NOTE]
>
> 有关详细信息，请参 [阅部署——运行模式](/help/implementing/deploying/overview.md#runmodes)

AEM作为云服务可用作单个实例，每个实例代表一个完整的AEM环境。 AEM作为云服务提供有四种类型的环境：

* **生产环境**:为业务从业者托管应用程序。

* **舞台环境**:始终以1:1的关系耦合到单个生产环境。 在将应用程序的更改推送到生产环境之前，舞台环境用于各种性能和质量测试。

* **开发环境**:允许开发人员在与舞台和生产环境相同的运行时条件下实施AEM应用程序。

* **演示环境**:可用于评估、演示、原型构建和培训。

开发和演示环境通常称为 *非生产环境* 。

## 计划 {#programs}

任何新AEM项目始终绑定到一个特定的代码库，您可以在该代码库中存储项目的配置和自定义代码。 此信息存储在代码存储库中，可通过常用Git客户端访问，并在创建新程序时提供给您。

AEM程序是包含以下内容的容器：

|  程序元素 |  数字 |
|--- |--- |
| 代码存储库(Git) |  1 |
| 基线图像（站点或资产） |  1 |
| 舞台和生产环境集(1:1) | 0或1 |
| 非生产环境（开发或演示） | 0到N |
| 适用于每个环境的管道 | 0或1 |

AEM最初提供两种类型的程序作为云服务：

* AEM Cloud Sites Service

* AEM Cloud Assets Service

这两者都允许访问许多特性和功能。 作者层将包含所有程序的所有站点和资产功能，但默认情况下，资产程序将没有发布层。

## 运行时架构 {#runtime-architecture}

此新架构有各种主要组件：

<!--- needs reworking -->

![AEM作为云服务——运行时体](assets/concepts-03.png "系架构AEM作为云服务——运行时体系架构")

* 对于AEM Sites作为云服务：

   * 每个环境（在高级别）仍然有创作层和发布层的概念。

   * 作者层由单个作者群集中的两个或多个节点组成。 它会根据创作活动自动缩放。

      * 内容作者／创建者登录AEM作者层以创建、编辑和管理内容。

      * 登录到作者层由Adobe Identity Management Services(IMS)管理。

      * 资产集成和处理使用专用的资产计算服务。
   * 发布层由单个发布群中的两个或多个节点组成：它们可以相互独立地运作。 每个节点都由AEM发布者和配备AEM Dispatcher模块的Web服务器组成。 它可根据站点流量需求自动扩展。

      * 最终用户或站点访问者通过AEM发布服务访问网站。


* 对于AEM Assets作为云服务：

   * 该架构仅包括创作环境。

* 创作层和发布层均可从内容存储库服务读取内容并将其保留到内容存储库服务。

   * 发布层仅从持久层读取内容。

   * 创作层从持久层读取内容并将其写入持久层。

   * 博客存储在发布层和创作层之间共享；不会移动 *文件*。

   * 当内容从创作层批准时，这表示内容可以激活，因此被推送到发布层持久层。 这通过Replication Service（一个中间件管道）实现。 该管道接收新内容，其中单个发布服务节点订阅推送到管道的内容。

      >[!NOTE]
      >
      >有关详细信息，请参阅 [复制](/help/operations/replication.md)。

   * 开发人员和管理员可使用Cloud Manager提供的连续集成／连续交付(CI/CD)服务，将AEM作为云服务应用程序进行 [管理](/help/overview/what-is-new-and-different.md#cloud-manager)。 这包括使用Cloud Manager的CI/CD管道进行的代码和配置部署。 与监视、维护和疑难解答（例如，日志文件）相关的任何内容都会向Cloud manager中的客户公开。

   * 始终通过负载平衡器访问创作和发布层。 它始终与每个层中的活动节点保持最新。

   * 对于发布层，连续交付网络(CDN)服务也可作为第一个入口点提供。

* 对于AEM作为云服务的演示实例，将架构简化为单个作者节点。 因此，它不具有标准开发、阶段或生产环境的所有特点。 这也意味着可能会出现一些停机时间，并且不支持备份／恢复操作。

## 部署架构 {#deployment-architecture}

Cloud manager将AEM实例的所有更新作为云服务进行管理。 它是强制性的，是构建、测试和部署客户应用程序的唯一方法，同时适用于作者层和发布层。 当AEM云服务的新版本准备就绪时，这些更新可由Adobe触发；当其应用程序的新版本准备就绪时，可由客户触发。

从技术上讲，这是由于部署管道的概念而实现的，该部署管道耦合到程序内的每个环境。 当Cloud manager管道运行时，它将为作者层和发布层创建客户应用程序的新版本。 这是通过将最新的客户包与最新的基准Adobe图像相结合来实现的。 成功构建和测试新图像后，Cloud Manager会使用滚动更新模式更新所有服务节点，从而完全自动转换为最新版本的图像。 这不会导致创作或发布服务停机。

<!--- needs reworking -->

![AEM作为云服务——部署架](assets/concepts-04.png "构AEM作为云服务——部署架构")

## 内容分发 {#content-distribution}

Adobe Experience manager作为云服务，改进了内容发布的工作方式。 将AEM作为云服务，AEM早期版本中的复制框架不再用于发布页面（将更改从创作实例移动到发布实例）。

AEM作为云服务现在使用 [Sling内容分发功能](https://sling.apache.org/documentation/bundles/content-distribution.html) ，移动相应的内容。 这使用在AEM运行时外的Adobe I/O上运行的管道服务。

设置是自动的，包括在运行时添加、删除或循环使用发布节点时的自动自配置。

单个发布或取消发布请求可以包括多个资源，但将返回应用于所有资源的单个状态；它将成功用于AEM发布服务中的所有资源，或失败用于所有资源。 这可确保AEM发布服务中的资源永远不会处于不一致状态。

**高层内容分发架构图**

![高级内容分发架构图](assets/architecture-diagram.png "高级内容分发架构图")

## 关键演化 {#key-evolutions}

与前几代产品相比，AEM云服务的新架构引入了一些根本性的变化和创新：

* 所有文件(blob)都直接从云数据存储中上传和提供。 关联的位流永远不会通过AEM作者和发布服务的JVM。 因此，AEM作者和发布服务的节点可以更小，并且更符合快速自动缩放的预期。 对于业务从业者而言，这可以在上传和下载图像、视频等时获得更快的体验。

* 现在，包括发布内容的所有操作都包含一个遵循订阅模式的管道。 已发布内容会推送到管道中的各个队列，发布服务的所有节点都订阅这些队列。 因此，作者层无需了解发布服务中的节点数；这允许快速自动缩放发布层。

* 为了自动化发布节点的生命周期，引入了Golden Master的概念。 Golden Master是一个专用的发布节点，任何最终用户都不会访问它，并从中创建发布服务的所有节点。 对附加到黄金主页的内容存储库执行压缩等维护操作。 发布节点每天循环使用，不需要任何类型的日常维护；过去，此类维护需要一些停机时间，尤其是对于作者实例。

* 该架构将应用程序内容与应用程序代码和配置完全分离。 所有代码和配置实际上都是不可改变的，并且会烘焙到用于创建创作和发布服务的各种节点的基准图像中。 因此，可以绝对保证每个节点都相同，并且只能通过运行Cloud manager管道全局更改代码和配置。
